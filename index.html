<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Untuk Kamu ❤️</title>
  <style>
    /* Styling dasar agar web full screen dan keren */
    body { 
      margin: 0; 
      overflow: hidden; 
      background-color: #050505; 
      color: white; 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    }
    #canvas-container { 
      position: absolute; 
      top: 0; 
      left: 0; 
      width: 100vw; 
      height: 100vh; 
      z-index: 1; 
    }
    #text-overlay { 
      position: absolute; 
      top: 50%; 
      left: 50%; 
      transform: translate(-50%, -50%); 
      text-align: center; 
      z-index: 2; 
      pointer-events: none; /* Agar mouse tetap bisa muter objek 3D di belakang teks */
      width: 90%; 
    }
    h1 { 
      font-size: 3.5rem; 
      margin: 0; 
      text-shadow: 0 0 20px #ff2a6d; 
      opacity: 0; /* Disembunyikan dulu sebelum dianimasikan */
      transform: scale(0.5);
    }
    p { 
      font-size: 1.5rem; 
      font-style: italic; 
      font-weight: 300; 
      text-shadow: 0 0 10px rgba(255,255,255,0.5); 
      margin-top: 20px; 
      opacity: 0; 
      transform: translateY(20px);
    }
  </style>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  
  <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.150.1/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.150.1/examples/jsm/"
      }
    }
  </script>
</head>
<body>

  <div id="canvas-container"></div>
  
  <div id="text-overlay">
    <h1 id="title">Untuk Kamu...</h1>
    <p id="quote">Memuat cinta...</p>
  </div>

  <script type="module">
    import * as THREE from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

    // ==========================================
    // 1. DATA GOMBALAN (Pengganti Backend)
    // ==========================================
    const quotes = [
      "Aku nggak butuh Google, karena semua yang aku cari ada di kamu.",
      "Dunia ini isinya 8 miliar orang, tapi mataku cuma fokus ke kamu.",
      "Kamu itu kayak WiFi, bikin aku pengen connect terus.",
      "Cintaku ke kamu itu kayak utang, makin hari makin numpuk.",
      "Kalau disuruh melupakanmu, aku mau ke kelurahan dulu, minta surat keterangan tidak mampu."
    ];
    // Pilih kata-kata acak
    const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
    document.getElementById('quote').innerText = `"${randomQuote}"`;

    // ==========================================
    // 2. ANIMASI TEKS 
    // ==========================================
    gsap.to("#title", { opacity: 1, scale: 1, duration: 1.5, ease: "back.out(1.7)" });
    gsap.to("#quote", { opacity: 1, y: 0, duration: 1.5, delay: 1, ease: "power2.out" });

    // ==========================================
    // 3. SETUP 3D HEART & STARS (Three.js)
    // ==========================================
    const container = document.getElementById('canvas-container');
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 12;

    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    container.appendChild(renderer.domElement);

    // Kontrol mouse (bisa diputar-putar)
    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableZoom = false;
    controls.autoRotate = true;
    controls.autoRotateSpeed = 2.0;

    // Pencahayaan
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
    scene.add(ambientLight);
    const dirLight = new THREE.DirectionalLight(0xff8eac, 2);
    dirLight.position.set(10, 10, 5);
    scene.add(dirLight);

    // Membuat Taburan Bintang
    const starsGeometry = new THREE.BufferGeometry();
    const starsMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.1 });
    const starsVertices = [];
    for(let i = 0; i < 3000; i++) {
        const x = THREE.MathUtils.randFloatSpread(100);
        const y = THREE.MathUtils.randFloatSpread(100);
        const z = THREE.MathUtils.randFloatSpread(100);
        starsVertices.push(x, y, z);
    }
    starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
    const starField = new THREE.Points(starsGeometry, starsMaterial);
    scene.add(starField);

    // Membuat Bentuk Hati 3D
    const x = 0, y = 0;
    const heartShape = new THREE.Shape();
    heartShape.moveTo(x + 2.5, y + 2.5);
    heartShape.bezierCurveTo(x + 2.5, y + 2.5, x + 2.0, y, x, y);
    heartShape.bezierCurveTo(x - 3.0, y, x - 3.0, y + 3.5, x - 3.0, y + 3.5);
    heartShape.bezierCurveTo(x - 3.0, y + 5.5, x - 1.0, y + 7.7, x + 2.5, y + 9.5);
    heartShape.bezierCurveTo(x + 6.0, y + 7.7, x + 8.0, y + 5.5, x + 8.0, y + 3.5);
    heartShape.bezierCurveTo(x + 8.0, y + 3.5, x + 8.0, y, x + 5.0, y);
    heartShape.bezierCurveTo(x + 3.5, y, x + 2.5, y + 2.5, x + 2.5, y + 2.5);

    const extrudeSettings = { depth: 2, bevelEnabled: true, bevelSegments: 3, steps: 2, bevelSize: 1, bevelThickness: 1 };
    const geometry = new THREE.ExtrudeGeometry(heartShape, extrudeSettings);
    geometry.center(); // Pusatkan objek
    
    // Memberi warna dan tekstur metalik pada hati
    const material = new THREE.MeshStandardMaterial({ color: 0xff2a6d, roughness: 0.2, metalness: 0.8 });
    const heartMesh = new THREE.Mesh(geometry, material);
    heartMesh.rotation.x = Math.PI; // Balikkan agar posisinya benar
    heartMesh.scale.set(0.4, 0.4, 0.4);
    scene.add(heartMesh);

    // Loop Animasi (agar hati melayang dan berputar)
    const clock = new THREE.Clock();
    function animate() {
        requestAnimationFrame(animate);
        const elapsedTime = clock.getElapsedTime();
        
        // Efek hati melayang naik turun
        heartMesh.position.y = Math.sin(elapsedTime * 2) * 0.5; 
        
        controls.update(); // Update rotasi otomatis
        renderer.render(scene, camera);
    }
    animate();

    // Agar ukuran canvas menyesuaikan saat layar di-resize (atau dibuka di HP)
    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
